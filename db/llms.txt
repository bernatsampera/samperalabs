# Database Layer

> SQLite-based content storage for blog posts and references with file-based database and remote sync tooling.

The data layer uses SQLite via the `better-sqlite3` Node.js driver. The database file (`content.db`) stores blog posts and reference documents with Markdown/plaintext content, tags (as JSON), and metadata. The database is initialized automatically on first run using the schema definition. A Python sync script handles pulling and pushing the database file to/from the production VPS via SCP.

## Schema

- [db/schema.sql](schema.sql): Posts and refs table definitions; posts has columns for title, author, description, image, pub_date, tags (JSON), content (Markdown), slug, and timestamps; refs has columns for title, description, format, tags (JSON), content, slug, and timestamps

## Application Layer

- [src/lib/db.ts](../src/lib/db.ts): Database connection singleton and query class â€” provides CRUD methods for posts (getAllPosts, getPostBySlug, etc.) and references (getAllReferences, getReferenceBySlug, insertReference, updateReference, deleteReference) using better-sqlite3
- [db/README.md](README.md): Database documentation covering schema, setup, migration, API endpoints, and production deployment

## Scripts

- [scripts/manage-sqlite/index.py](../scripts/manage-sqlite/index.py): Python CLI tool for syncing the SQLite database to/from the production VPS via SCP (pull and push commands)
